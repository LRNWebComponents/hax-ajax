<link rel="import" href="../polymer/polymer.html">

<!--
`hax-ajax`
A LRN element

@demo demo/index.html
-->

<dom-module id="hax-ajax">
  <template>
    <style>
      :host {
        display: block;
      }
    </style>
    <content></content>
    <iron-ajax
       url="[[url]]"
       handle-as="json"
       on-response="haxAjaxResponse" id="hax-endpoint"></iron-ajax>
  </template>

  <script>
    Polymer({

      is: 'hax-ajax',

      properties: {
        /**
         * The url endpoint to save operations once noticed.
         */
        url: {
          type: String
        },
        canHax: {
          type: Boolean,
          value: false,
        }
      },
      listeners: {
        'action': '_triggerSave',
      },
      _triggerSave: function(e) {
        if (e.detail.action == 'save') {
          alert("Thank you for hitting save");
          console.log(this.attributes);
          console.log(e);
          this.$$('#hax-endpoint').properties = e.properties;
          // trigger it to run
          this.$$('#hax-endpoint').generateRequest;
        }
      },
      haxAjaxResponse: function(e) {
        console.log('handle ajax response');
      },
    });
  </script>
</dom-module>
